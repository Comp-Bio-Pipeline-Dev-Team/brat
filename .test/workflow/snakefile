## test snakefile for github actions!

## singularities (preferred)
## thank god, my container works 
## --use-singularity and --software-deployment-method apptainer both work with just singularity defined in the rule!
## --use-singularity/--software-deployment-method apptainer works with conda environment provided in the rule but not called 
## conda needs to be installed in the singularity container for snakemake to run it (snakemake also needs to be installed i think)
## my container installs the fastqc conda environment and snakemake which seems to work better
FASTQC_SING = "docker://tbrunetti/functional_crispr_screen:fastqc-v0.12.1"
##"docker://madiapgar/bulk_rna_seq:fastqc_conda-v0.12.1"
##FASTQC_CONDA = "envs/fastqc_env.yml"

rule all:
    input:
        "give_me_fastqc_version.txt"


rule run_pretrimming_fastqc:
    output:
        out_file = "give_me_fastqc_version.txt"
    singularity:
        FASTQC_SING
    shell:
        """
        echo "creating empty file!"
        touch {output.out_file}

        echo "running fastqc"
        fastqc --version >> {output.out_file}

        echo "obtained fastqc version!"
        """